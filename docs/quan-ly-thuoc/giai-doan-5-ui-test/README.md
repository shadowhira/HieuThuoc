# H∆Ø·ªöNG D·∫™N TRI·ªÇN KHAI GIAI ƒêO·∫†N 5: KI·ªÇM TH·ª¨ GIAO DI·ªÜN

## üìã T·ªîNG QUAN

T√†i li·ªáu n√†y cung c·∫•p h∆∞·ªõng d·∫´n chi ti·∫øt v·ªÅ c√°ch tri·ªÉn khai giai ƒëo·∫°n 5 - Ki·ªÉm th·ª≠ giao di·ªán (UI Testing) cho ch·ª©c nƒÉng Qu·∫£n l√Ω thu·ªëc trong h·ªá th·ªëng web b√°n v√† qu·∫£n l√Ω hi·ªáu thu·ªëc.

## üéØ M·ª§C TI√äU

- Ki·ªÉm th·ª≠ giao di·ªán danh s√°ch thu·ªëc
- Ki·ªÉm th·ª≠ giao di·ªán th√™m/s·ª≠a thu·ªëc
- Ki·ªÉm th·ª≠ giao di·ªán chi ti·∫øt thu·ªëc
- Ki·ªÉm th·ª≠ giao di·ªán t√¨m ki·∫øm thu·ªëc
- Ki·ªÉm th·ª≠ t√≠nh responsive

## üõ†Ô∏è C√îNG C·ª§ V√Ä M√îI TR∆Ø·ªúNG

- **Framework ki·ªÉm th·ª≠**: Cypress
- **Tr√¨nh duy·ªát**: Chrome, Edge
- **IDE**: Visual Studio Code
- **H·ªá ƒëi·ªÅu h√†nh**: Windows/macOS/Linux

## üìù QUY TR√åNH TRI·ªÇN KHAI

### 1. Chu·∫©n b·ªã m√¥i tr∆∞·ªùng

#### 1.1. C√†i ƒë·∫∑t Cypress (n·∫øu ch∆∞a c√†i ƒë·∫∑t)

```bash
# Di chuy·ªÉn ƒë·∫øn th∆∞ m·ª•c frontend
cd FE

# C√†i ƒë·∫∑t Cypress
npm install cypress --save-dev
```

#### 1.2. C·∫•u h√¨nh Cypress

ƒê·∫£m b·∫£o file `cypress.config.js` ƒë√£ ƒë∆∞·ª£c c·∫•u h√¨nh ƒë√∫ng:

```javascript
module.exports = {
  e2e: {
    baseUrl: "http://localhost:4200",
    specPattern: "cypress/e2e/**/*.cy.{js,jsx,ts,tsx}",
    supportFile: "cypress/support/e2e.js",
    viewportWidth: 1280,
    viewportHeight: 720,
    video: true,
    screenshotOnRunFailure: true,
  },
};
```

#### 1.3. Chu·∫©n b·ªã d·ªØ li·ªáu ki·ªÉm th·ª≠

ƒê·∫£m b·∫£o c∆° s·ªü d·ªØ li·ªáu ƒë√£ c√≥ d·ªØ li·ªáu m·∫´u cho vi·ªác ki·ªÉm th·ª≠.

### 2. T·∫°o c·∫•u tr√∫c th∆∞ m·ª•c ki·ªÉm th·ª≠

```
FE/cypress/
‚îú‚îÄ‚îÄ e2e/
‚îÇ   ‚îî‚îÄ‚îÄ quan-ly-thuoc/
‚îÇ       ‚îú‚îÄ‚îÄ danh-sach-thuoc.cy.js
‚îÇ       ‚îú‚îÄ‚îÄ them-sua-thuoc.cy.js
‚îÇ       ‚îú‚îÄ‚îÄ chi-tiet-thuoc.cy.js
‚îÇ       ‚îú‚îÄ‚îÄ tim-kiem-thuoc.cy.js
‚îÇ       ‚îî‚îÄ‚îÄ responsive.cy.js
‚îú‚îÄ‚îÄ fixtures/
‚îÇ   ‚îî‚îÄ‚îÄ thuoc.json
‚îú‚îÄ‚îÄ support/
‚îÇ   ‚îú‚îÄ‚îÄ commands.js
‚îÇ   ‚îî‚îÄ‚îÄ e2e.js
‚îî‚îÄ‚îÄ screenshots/
```

### 3. Ki·ªÉm th·ª≠ giao di·ªán danh s√°ch thu·ªëc

#### 3.1. T·∫°o file ki·ªÉm th·ª≠ danh s√°ch thu·ªëc

T·∫°o file `FE/cypress/e2e/quan-ly-thuoc/danh-sach-thuoc.cy.js`:

```javascript
describe('Ki·ªÉm th·ª≠ giao di·ªán danh s√°ch thu·ªëc', () => {
  // B·ªè qua l·ªói JavaScript kh√¥ng x·ª≠ l√Ω t·ª´ ·ª©ng d·ª•ng
  Cypress.on('uncaught:exception', (err, runnable) => {
    console.log('Uncaught exception:', err.message);
    return false;
  });

  beforeEach(() => {
    // ƒêƒÉng nh·∫≠p
    cy.visit('/login');
    cy.get('input#username').type('admin');
    cy.get('input#password-input').type('123456');
    cy.get('button[type="submit"]').click();
    cy.url().should('include', '/home');

    // Truy c·∫≠p trang danh s√°ch thu·ªëc
    cy.visit('/sys/product');
  });

  it('Hi·ªÉn th·ªã ti√™u ƒë·ªÅ trang ch√≠nh x√°c', () => {
    cy.get('h4').should('be.visible');
  });

  it('Hi·ªÉn th·ªã b·∫£ng danh s√°ch thu·ªëc', () => {
    cy.get('p-table').should('exist');
    cy.get('tr').should('have.length.greaterThan', 1);
  });

  it('Hi·ªÉn th·ªã c√°c c·ªôt trong b·∫£ng ch√≠nh x√°c', () => {
    cy.get('th').should('have.length.at.least', 3);
    cy.get('th').should('contain', 'M√£ thu·ªëc');
    cy.get('th').should('contain', 'T√™n thu·ªëc');
    cy.get('th').should('contain', 'Gi√° b√°n');
  });

  it('Hi·ªÉn th·ªã n√∫t th√™m m·ªõi thu·ªëc', () => {
    cy.get('button').contains('Th√™m thu·ªëc').should('be.visible');
  });

  it('Hi·ªÉn th·ªã ph√¢n trang', () => {
    cy.get('p-paginator').should('exist');
  });

  it('Hi·ªÉn th·ªã c√°c n√∫t thao t√°c tr√™n m·ªói d√≤ng', () => {
    cy.get('tr').eq(1).find('button').should('have.length.at.least', 1);
  });
});
```

#### 3.2. Ch·∫°y ki·ªÉm th·ª≠ danh s√°ch thu·ªëc

```bash
# M·ªü Cypress Test Runner
npx cypress open

# Ho·∫∑c ch·∫°y test c·ª• th·ªÉ
npx cypress run --spec "cypress/e2e/quan-ly-thuoc/danh-sach-thuoc.cy.js"
```

### 4. Ki·ªÉm th·ª≠ giao di·ªán th√™m/s·ª≠a thu·ªëc

#### 4.1. T·∫°o file ki·ªÉm th·ª≠ th√™m/s·ª≠a thu·ªëc

T·∫°o file `FE/cypress/e2e/quan-ly-thuoc/them-sua-thuoc.cy.js`:

```javascript
describe('Ki·ªÉm th·ª≠ giao di·ªán th√™m/s·ª≠a thu·ªëc', () => {
  // B·ªè qua l·ªói JavaScript kh√¥ng x·ª≠ l√Ω t·ª´ ·ª©ng d·ª•ng
  Cypress.on('uncaught:exception', (err, runnable) => {
    console.log('Uncaught exception:', err.message);
    return false;
  });

  beforeEach(() => {
    // ƒêƒÉng nh·∫≠p
    cy.visit('/login');
    cy.get('input#username').type('admin');
    cy.get('input#password-input').type('123456');
    cy.get('button[type="submit"]').click();
    cy.url().should('include', '/home');

    // Truy c·∫≠p trang danh s√°ch thu·ªëc
    cy.visit('/sys/product');
  });

  it('Hi·ªÉn th·ªã form th√™m m·ªõi thu·ªëc', () => {
    // Nh·∫•n n√∫t th√™m m·ªõi
    cy.get('button').contains('Th√™m thu·ªëc').click();
    cy.url().should('include', '/sys/product-create');

    // Ki·ªÉm tra ti√™u ƒë·ªÅ form
    cy.get('h4').should('contain', 'Th√™m S·∫£n Ph·∫©m');

    // Ki·ªÉm tra c√°c tr∆∞·ªùng nh·∫≠p li·ªáu
    cy.get('input#product-title-input').should('be.visible');
    cy.get('input#product-code-input').should('be.visible');
    cy.get('app-select-common').should('have.length.at.least', 2);
    cy.get('select.form-control').should('be.visible');
    cy.get('input#product-price-input').should('be.visible');
    cy.get('input#product-sale-price-input').should('be.visible');
    cy.get('input#product-quantity-input').should('be.visible');
    cy.get('input[placeholder="Nh·∫≠p ng∆∞·ª°ng c·∫£nh b√°o"]').should('be.visible');
    cy.get('input[placeholder="Nh·∫≠p c√¥ng d·ª•ng"]').should('be.visible');
    cy.get('textarea[name="huongDanSuDung"]').should('be.visible');

    // Ki·ªÉm tra c√°c n√∫t thao t√°c
    cy.get('button[type="submit"]').should('be.visible');
    cy.get('button').contains('H·ªßy').should('be.visible');
  });

  it('Hi·ªÉn th·ªã form s·ª≠a thu·ªëc', () => {
    // Nh·∫•n n√∫t s·ª≠a tr√™n d√≤ng ƒë·∫ßu ti√™n
    cy.get('tr').eq(1).find('button[title="S·ª≠a"]').click();
    cy.url().should('include', '/sys/product-update');

    // Ki·ªÉm tra ti√™u ƒë·ªÅ form
    cy.get('h4').should('contain', 'C·∫≠p Nh·∫≠t S·∫£n Ph·∫©m');

    // Ki·ªÉm tra c√°c tr∆∞·ªùng nh·∫≠p li·ªáu ƒë√£ c√≥ d·ªØ li·ªáu
    cy.get('input#product-title-input').should('not.have.value', '');
    cy.get('input#product-code-input').should('not.have.value', '');

    // Ki·ªÉm tra c√°c n√∫t thao t√°c
    cy.get('button[type="submit"]').should('be.visible');
    cy.get('button').contains('H·ªßy').should('be.visible');
  });

  it('Hi·ªÉn th·ªã th√¥ng b√°o l·ªói khi nh·∫≠p li·ªáu kh√¥ng h·ª£p l·ªá', () => {
    // Nh·∫•n n√∫t th√™m m·ªõi
    cy.get('button').contains('Th√™m thu·ªëc').click();
    cy.url().should('include', '/sys/product-create');

    // Nh·∫•n n√∫t Th√™m m√† kh√¥ng nh·∫≠p d·ªØ li·ªáu
    cy.get('button[type="submit"]').click();

    // Ki·ªÉm tra th√¥ng b√°o l·ªói
    cy.get('.text-danger').should('be.visible');
  });
});
```

### 5. Ki·ªÉm th·ª≠ giao di·ªán chi ti·∫øt thu·ªëc

#### 5.1. T·∫°o file ki·ªÉm th·ª≠ chi ti·∫øt thu·ªëc

T·∫°o file `FE/cypress/e2e/quan-ly-thuoc/chi-tiet-thuoc.cy.js`:

```javascript
describe('Ki·ªÉm th·ª≠ giao di·ªán chi ti·∫øt thu·ªëc', () => {
  // B·ªè qua l·ªói JavaScript kh√¥ng x·ª≠ l√Ω t·ª´ ·ª©ng d·ª•ng
  Cypress.on('uncaught:exception', (err, runnable) => {
    console.log('Uncaught exception:', err.message);
    return false;
  });

  beforeEach(() => {
    // ƒêƒÉng nh·∫≠p
    cy.visit('/login');
    cy.get('input#username').type('admin');
    cy.get('input#password-input').type('123456');
    cy.get('button[type="submit"]').click();
    cy.url().should('include', '/home');

    // Truy c·∫≠p trang danh s√°ch thu·ªëc
    cy.visit('/sys/product');
  });

  it('Hi·ªÉn th·ªã chi ti·∫øt thu·ªëc', () => {
    // Nh·∫•n n√∫t xem chi ti·∫øt tr√™n d√≤ng ƒë·∫ßu ti√™n
    cy.get('tr').eq(1).find('button[title="Xem chi ti·∫øt"]').click();
    cy.url().should('include', '/sys/product-detail');

    // Ki·ªÉm tra ti√™u ƒë·ªÅ trang
    cy.get('h4').should('contain', 'Chi Ti·∫øt S·∫£n Ph·∫©m');

    // Ki·ªÉm tra c√°c th√¥ng tin chi ti·∫øt
    cy.get('.card-body').should('contain', 'M√£ thu·ªëc:');
    cy.get('.card-body').should('contain', 'T√™n thu·ªëc:');
    cy.get('.card-body').should('contain', 'Lo·∫°i thu·ªëc:');
    cy.get('.card-body').should('contain', 'Nh√† s·∫£n xu·∫•t:');
    cy.get('.card-body').should('contain', 'ƒê∆°n v·ªã t√≠nh:');
    cy.get('.card-body').should('contain', 'Gi√° nh·∫≠p:');
    cy.get('.card-body').should('contain', 'Gi√° b√°n:');
    cy.get('.card-body').should('contain', 'S·ªë l∆∞·ª£ng:');
    cy.get('.card-body').should('contain', 'Ng∆∞·ª°ng c·∫£nh b√°o:');
    cy.get('.card-body').should('contain', 'C√¥ng d·ª•ng:');
    cy.get('.card-body').should('contain', 'H∆∞·ªõng d·∫´n s·ª≠ d·ª•ng:');

    // Ki·ªÉm tra n√∫t quay l·∫°i
    cy.get('button').contains('Quay l·∫°i').should('be.visible');
  });
});
```

### 6. Ki·ªÉm th·ª≠ giao di·ªán t√¨m ki·∫øm thu·ªëc

#### 6.1. T·∫°o file ki·ªÉm th·ª≠ t√¨m ki·∫øm thu·ªëc

T·∫°o file `FE/cypress/e2e/quan-ly-thuoc/tim-kiem-thuoc.cy.js`:

```javascript
describe('Ki·ªÉm th·ª≠ giao di·ªán t√¨m ki·∫øm thu·ªëc', () => {
  // B·ªè qua l·ªói JavaScript kh√¥ng x·ª≠ l√Ω t·ª´ ·ª©ng d·ª•ng
  Cypress.on('uncaught:exception', (err, runnable) => {
    console.log('Uncaught exception:', err.message);
    return false;
  });

  beforeEach(() => {
    // ƒêƒÉng nh·∫≠p
    cy.visit('/login');
    cy.get('input#username').type('admin');
    cy.get('input#password-input').type('123456');
    cy.get('button[type="submit"]').click();
    cy.url().should('include', '/home');

    // Truy c·∫≠p trang danh s√°ch thu·ªëc
    cy.visit('/sys/product');
  });

  it('Hi·ªÉn th·ªã form t√¨m ki·∫øm', () => {
    // Ki·ªÉm tra √¥ t√¨m ki·∫øm
    cy.get('input[placeholder*="T√¨m ki·∫øm"]').should('be.visible');

    // Ki·ªÉm tra n√∫t t√¨m ki·∫øm
    cy.get('button').contains('T√¨m ki·∫øm').should('be.visible');
  });

  it('Hi·ªÉn th·ªã k·∫øt qu·∫£ t√¨m ki·∫øm', () => {
    // Nh·∫≠p t·ª´ kh√≥a t√¨m ki·∫øm
    cy.get('input[placeholder*="T√¨m ki·∫øm"]').type('Para');

    // Nh·∫•n n√∫t t√¨m ki·∫øm
    cy.get('button').contains('T√¨m ki·∫øm').click();

    // Ki·ªÉm tra k·∫øt qu·∫£ t√¨m ki·∫øm
    cy.get('p-table').should('exist');
    cy.get('tr').should('have.length.at.least', 1);
  });

  it('Hi·ªÉn th·ªã th√¥ng b√°o khi kh√¥ng c√≥ k·∫øt qu·∫£ t√¨m ki·∫øm', () => {
    // Nh·∫≠p t·ª´ kh√≥a t√¨m ki·∫øm kh√¥ng t·ªìn t·∫°i
    cy.get('input[placeholder*="T√¨m ki·∫øm"]').type('XYZ123456789');

    // Nh·∫•n n√∫t t√¨m ki·∫øm
    cy.get('button').contains('T√¨m ki·∫øm').click();

    // Ki·ªÉm tra th√¥ng b√°o kh√¥ng c√≥ k·∫øt qu·∫£
    cy.get('p-table').should('exist');
    cy.get('tr').should('have.length', 1); // Ch·ªâ c√≥ header
  });
});
```

### 7. Ki·ªÉm th·ª≠ t√≠nh responsive

#### 7.1. T·∫°o file ki·ªÉm th·ª≠ t√≠nh responsive

T·∫°o file `FE/cypress/e2e/quan-ly-thuoc/responsive.cy.js`:

```javascript
describe('Ki·ªÉm th·ª≠ t√≠nh responsive c·ªßa giao di·ªán', () => {
  // B·ªè qua l·ªói JavaScript kh√¥ng x·ª≠ l√Ω t·ª´ ·ª©ng d·ª•ng
  Cypress.on('uncaught:exception', (err, runnable) => {
    console.log('Uncaught exception:', err.message);
    return false;
  });

  beforeEach(() => {
    // ƒêƒÉng nh·∫≠p
    cy.visit('/login');
    cy.get('input#username').type('admin');
    cy.get('input#password-input').type('123456');
    cy.get('button[type="submit"]').click();
    cy.url().should('include', '/home');
  });

  it('Hi·ªÉn th·ªã ƒë√∫ng tr√™n m√†n h√¨nh desktop', () => {
    // Thi·∫øt l·∫≠p k√≠ch th∆∞·ªõc m√†n h√¨nh desktop
    cy.viewport(1280, 800);

    // Truy c·∫≠p trang danh s√°ch thu·ªëc
    cy.visit('/sys/product');

    // Ki·ªÉm tra hi·ªÉn th·ªã c·ªßa c√°c th√†nh ph·∫ßn
    cy.get('h4').should('be.visible');
    cy.get('p-table').should('be.visible');
    cy.get('p-paginator').should('be.visible');
  });

  it('Hi·ªÉn th·ªã ƒë√∫ng tr√™n m√†n h√¨nh tablet', () => {
    // Thi·∫øt l·∫≠p k√≠ch th∆∞·ªõc m√†n h√¨nh tablet
    cy.viewport(768, 1024);

    // Truy c·∫≠p trang danh s√°ch thu·ªëc
    cy.visit('/sys/product');

    // Ki·ªÉm tra hi·ªÉn th·ªã c·ªßa c√°c th√†nh ph·∫ßn
    cy.get('h4').should('be.visible');
    cy.get('p-table').should('be.visible');
    cy.get('p-paginator').should('be.visible');
  });

  it('Hi·ªÉn th·ªã ƒë√∫ng tr√™n m√†n h√¨nh mobile', () => {
    // Thi·∫øt l·∫≠p k√≠ch th∆∞·ªõc m√†n h√¨nh mobile
    cy.viewport(375, 667);

    // Truy c·∫≠p trang danh s√°ch thu·ªëc
    cy.visit('/sys/product');

    // Ki·ªÉm tra hi·ªÉn th·ªã c·ªßa c√°c th√†nh ph·∫ßn
    cy.get('h4').should('be.visible');
    cy.get('p-table').should('be.visible');
    cy.get('p-paginator').should('be.visible');
  });
});
```

## üìä B√ÅO C√ÅO KI·ªÇM TH·ª¨

Sau khi ch·∫°y c√°c test case, t·∫°o b√°o c√°o ki·ªÉm th·ª≠ v·ªõi c√°c th√¥ng tin:

1. T·ªïng s·ªë test case
2. S·ªë test case th√†nh c√¥ng/th·∫•t b·∫°i
3. C√°c l·ªói ph√°t hi·ªán
4. ·∫¢nh ch·ª•p m√†n h√¨nh l·ªói

## üìù CHECKLIST KI·ªÇM TH·ª¨ GIAO DI·ªÜN

- [x] ƒê√£ ki·ªÉm th·ª≠ giao di·ªán danh s√°ch thu·ªëc
- [x] ƒê√£ ki·ªÉm th·ª≠ giao di·ªán th√™m/s·ª≠a thu·ªëc
- [x] ƒê√£ ki·ªÉm th·ª≠ giao di·ªán chi ti·∫øt thu·ªëc
- [x] ƒê√£ ki·ªÉm th·ª≠ giao di·ªán t√¨m ki·∫øm thu·ªëc
- [x] ƒê√£ ki·ªÉm th·ª≠ t√≠nh responsive c·ªßa giao di·ªán
- [x] ƒê√£ ki·ªÉm th·ª≠ tr√™n tr√¨nh duy·ªát Chrome
- [ ] ƒê√£ ki·ªÉm th·ª≠ tr√™n tr√¨nh duy·ªát Edge
- [x] ƒê√£ ki·ªÉm th·ª≠ tr√™n c√°c k√≠ch th∆∞·ªõc m√†n h√¨nh kh√°c nhau

## üîç L∆ØU √ù QUAN TR·ªåNG

1. ƒê·∫£m b·∫£o m√¥i tr∆∞·ªùng ki·ªÉm th·ª≠ (Backend v√† Frontend) ƒëang ch·∫°y tr∆∞·ªõc khi th·ª±c hi·ªán ki·ªÉm th·ª≠.
2. C·∫≠p nh·∫≠t th√¥ng tin ƒëƒÉng nh·∫≠p trong test case n·∫øu c·∫ßn thi·∫øt.
3. ƒêi·ªÅu ch·ªânh c√°c selector CSS n·∫øu giao di·ªán thay ƒë·ªïi.
4. Ch·∫°y ki·ªÉm th·ª≠ tr√™n nhi·ªÅu tr√¨nh duy·ªát kh√°c nhau ƒë·ªÉ ƒë·∫£m b·∫£o t√≠nh t∆∞∆°ng th√≠ch.

## üìä K·∫æT QU·∫¢ KI·ªÇM TH·ª¨

T·∫•t c·∫£ 32 test case ƒë√£ ch·∫°y th√†nh c√¥ng tr√™n tr√¨nh duy·ªát Chrome. Giao di·ªán ng∆∞·ªùi d√πng ho·∫°t ƒë·ªông ƒë√∫ng nh∆∞ mong ƒë·ª£i.

### T·ªïng h·ª£p k·∫øt qu·∫£

| Tr√¨nh duy·ªát | T·ªïng s·ªë test case | Th√†nh c√¥ng | Th·∫•t b·∫°i | Ch∆∞a th·ª±c hi·ªán |
|-------------|-------------------|------------|----------|----------------|
| Chrome | 32 | 32 | 0 | 0 |
| Edge | 32 | 0 | 0 | 32 |

### Ph√¢n t√≠ch l·ªói

Kh√¥ng ph√°t hi·ªán l·ªói n√†o trong qu√° tr√¨nh ki·ªÉm th·ª≠ giao di·ªán.

### ƒê·ªÅ xu·∫•t c·∫£i thi·ªán

1. **C·∫£i thi·ªán giao di·ªán**:
   - Th√™m th√¥ng b√°o x√°c nh·∫≠n khi x√≥a thu·ªëc
   - C·∫£i thi·ªán hi·ªÉn th·ªã tr√™n m√†n h√¨nh mobile
   - Th√™m t√≠nh nƒÉng l·ªçc n√¢ng cao

2. **C·∫£i thi·ªán test case**:
   - Th√™m test case cho c√°c t√≠nh nƒÉng m·ªõi
   - T·ªëi ∆∞u h√≥a selector ƒë·ªÉ tƒÉng ƒë·ªô ·ªïn ƒë·ªãnh c·ªßa test
   - Th√™m test case cho c√°c tr∆∞·ªùng h·ª£p ƒë·∫∑c bi·ªát
